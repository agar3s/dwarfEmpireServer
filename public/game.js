var n=i(28),s=i(210),r=i(16),o=i(14),a=i(164);r.register("sprite3D",(function(t,e){void 0===t&&(t={});var i=o(t,"key",null),r=o(t,"frame",null),h=new a(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),n(this.scene,h,t),s(h,t),h}))},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t,e,i){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=r(this,a(e).call(this,{key:"prebootScene"}))).nextScene="bootScene",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(e,[{key:"preload",value:function(){var t=this;o(a(e.prototype),"preload",this).call(this);var i="".concat("https://agar3s-assets.s3.amazonaws.com/dwarfEmpire/","assets/sprites/ui/");this.load.image("title",i+"dwarf_empire_title.png"),this.load.image("mainBG",i+"de_bg.jpg"),this.load.on("complete",(function(){t.changeToScene(t.nextScene)}))}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(72)).default);e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default={default:{font:"20px Calvert",fill:"#ffffff"},BM_calvert:{font:"18px Calvert bold",hoverColor:1223321,color:16777215,scale:1},BM_kenneyMini:{font:"kenneyMini",hoverColor:1223321,color:16777215,scale:2},BM_kenneyMiniSquare:{font:"kenneyMiniSquare",hoverColor:1223321,color:16777215,scale:2}}},function(t,e,i){"use strict";function n(t,e){var i=t.__state.conversionName.toString(),n=w(t.r),s=w(t.g),r=w(t.b),o=t.a,a=w(t.h),h=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===i||"SIX_CHAR_HEX"===i){for(var u=t.hex.toString(16);6>u.length;)u="0"+u;return"#"+u}return"CSS_RGB"===i?"rgb("+n+","+s+","+r+")":"CSS_RGBA"===i?"rgba("+n+","+s+","+r+","+o+")":"HEX"===i?"0x"+t.hex.toString(16):"RGB_ARRAY"===i?"["+n+","+s+","+r+"]":"RGBA_ARRAY"===i?"["+n+","+s+","+r+","+o+"]":"RGB_OBJ"===i?"{r:"+n+",g:"+s+",b:"+r+"}":"RGBA_OBJ"===i?"{r:"+n+",g:"+s+",b:"+r+",a:"+o+"}":"HSV_OBJ"===i?"{h:"+a+",s:"+h+",v:"+l+"}":"HSVA_OBJ"===i?"{h:"+a+",s:"+h+",v:"+l+",a:"+o+"}":"unknown format"}function s(t,e,i){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||Y.recalculateRGB(this,e,i),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(Y.recalculateRGB(this,e,i),this.__state.space="RGB"),this.__state[e]=t}})}function r(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||Y.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(Y.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}function o(t){if("0"===t||A.isUndefined(t))return 0;var e=t.match(X);return A.isNull(e)?0:parseFloat(e[1])}function a(t){var e=t.toString();return-1<e.indexOf(".")?e.length-e.indexOf(".")-1:0}function h(t,e,i,n,s){return n+(t-e)/(i-e)*(s-n)}function l(t,e,i,n){t.style.background="",A.each(Q,(function(s){t.style.cssText+="background: "+s+"linear-gradient("+e+", "+i+" 0%, "+n+" 100%); "}))}function u(t,e,i){var n=document.createElement("li");return e&&n.appendChild(e),i?t.__ul.insertBefore(n,i):t.__ul.appendChild(n),t.onResize(),n}function c(t){G.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&G.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function d(t,e){var i=t.__preset_select[t.__preset_select.selectedIndex];i.innerHTML=e?i.value+"*":i.value}function f(t,e){var i=t.getRoot(),n=i.__rememberedObjects.indexOf(e.object);if(-1!==n){var s=i.__rememberedObjectIndecesToControllers[n];if(void 0===s&&(s={},i.__rememberedObjectIndecesToControllers[n]=s),s[e.property]=e,i.load&&i.load.remembered){var r=i.load.remembered,o=void 0;if(r[t.preset])o=r[t.preset];else{if(!r[it])return;o=r[it]}if(o[n]&&void 0!==o[n][e.property]){var a=o[n][e.property];e.initialValue=a,e.setValue(a)}}}}function p(t,e,i,n){if(void 0===e[i])throw new Error('Object "'+e+'" has no property "'+i+'"');var s;if(n.color)s=new Z(e,i);else{var r=[e,i].concat(n.factoryArgs);s=$.apply(t,r)}n.before instanceof z&&(n.before=n.before.__li),f(t,s),G.addClass(s.domElement,"c");var o=document.createElement("span");G.addClass(o,"property-name"),o.innerHTML=s.property;var a=document.createElement("div");a.appendChild(o),a.appendChild(s.domElement);var h=u(t,a,n.before);return G.addClass(h,lt.CLASS_CONTROLLER_ROW),s instanceof Z?G.addClass(h,"color"):G.addClass(h,k(s.getValue())),function(t,e,i){if(i.__li=e,i.__gui=t,A.extend(i,{options:function(e){if(1<arguments.length){var n=i.__li.nextElementSibling;return i.remove(),p(t,i.object,i.property,{before:n,factoryArgs:[A.toArray(arguments)]})}if(A.isArray(e)||A.isObject(e)){var s=i.__li.nextElementSibling;return i.remove(),p(t,i.object,i.property,{before:s,factoryArgs:[e]})}},name:function(t){return i.__li.firstElementChild.firstElementChild.innerHTML=t,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof q){var n=new K(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});A.each(["updateDisplay","onChange","onFinishChange","step"],(function(t){var e=i[t],s=n[t];i[t]=n[t]=function(){var t=Array.prototype.slice.call(arguments);return s.apply(n,t),e.apply(i,t)}})),G.addClass(e,"has-slider"),i.domElement.insertBefore(n.domElement,i.domElement.firstElementChild)}else if(i instanceof K){var s=function(e){if(A.isNumber(i.__min)&&A.isNumber(i.__max)){var n=i.__li.firstElementChild.firstElementChild.innerHTML,s=-1<i.__gui.__listening.indexOf(i);i.remove();var r=p(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]});return r.name(n),s&&r.listen(),r}return e};i.min=A.compose(s,i.min),i.max=A.compose(s,i.max)}else i instanceof W?(G.bind(e,"click",(function(){G.fakeEvent(i.__checkbox,"click")})),G.bind(i.__checkbox,"click",(function(t){t.stopPropagation()}))):i instanceof J?(G.bind(e,"click",(function(){G.fakeEvent(i.__button,"click")})),G.bind(e,"mouseover",(function(){G.addClass(i.__button,"hover")})),G.bind(e,"mouseout",(function(){G.removeClass(i.__button,"hover")}))):i instanceof Z&&(G.addClass(e,"color"),i.updateDisplay=A.compose((function(t){return e.style.borderLeftColor=i.__color.toString(),t}),i.updateDisplay),i.updateDisplay());i.setValue=A.compose((function(e){return t.getRoot().__preset_select&&i.isModified()&&d(t.getRoot(),!0),e}),i.setValue)}(t,h,s),t.__controllers.push(s),s}function g(t,e){return document.location.href+"."+e}function v(t,e,i){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.__preset_select.appendChild(n),i&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function m(t,e){e.style.display=t.useLocalStorage?"block":"none"}function y(t){var e=t.__save_row=document.createElement("li");G.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),G.addClass(e,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",G.addClass(i,"button gears");var n=document.createElement("span");n.innerHTML="Save",G.addClass(n,"button"),G.addClass(n,"save");var s=document.createElement("span");s.innerHTML="New",G.addClass(s,"button"),G.addClass(s,"save-as");var r=document.createElement("span");r.innerHTML="Revert",G.addClass(r,"button"),G.addClass(r,"revert");var o=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?A.each(t.load.remembered,(function(e,i){v(t,i,i===t.preset)})):v(t,it,!1),G.bind(o,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(o),e.appendChild(i),e.appendChild(n),e.appendChild(s),e.appendChild(r),nt){var a=document.getElementById("dg-local-explain"),h=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(g(0,"isLocal"))&&h.setAttribute("checked","checked"),m(t,a),G.bind(h,"change",(function(){t.useLocalStorage=!t.useLocalStorage,m(t,a)}))}var l=document.getElementById("dg-new-constructor");G.bind(l,"keydown",(function(t){t.metaKey&&(67===t.which||67===t.keyCode)&&st.hide()})),G.bind(i,"click",(function(){l.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),st.show(),l.focus(),l.select()})),G.bind(n,"click",(function(){t.save()})),G.bind(s,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),G.bind(r,"click",(function(){t.revert()}))}function x(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function b(t,e){var i={};return A.each(t.__rememberedObjects,(function(n,s){var r={},o=t.__rememberedObjectIndecesToControllers[s];A.each(o,(function(t,i){r[i]=e?t.initialValue:t.getValue()})),i[s]=r})),i}var w=Math.round,T=Math.pow,_=Math.floor;i.r(e),i.d(e,"color",(function(){return ut})),i.d(e,"controllers",(function(){return ct})),i.d(e,"dom",(function(){return dt})),i.d(e,"gui",(function(){return ft})),i.d(e,"GUI",(function(){return pt}));var E=Array.prototype.forEach,S=Array.prototype.slice,A={BREAK:{},extend:function(t){return this.each(S.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(i){this.isUndefined(e[i])||(t[i]=e[i])}.bind(this))}),this),t},defaults:function(t){return this.each(S.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(i){this.isUndefined(t[i])&&(t[i]=e[i])}.bind(this))}),this),t},compose:function(){var t=S.call(arguments);return function(){for(var e=S.call(arguments),i=t.length-1;0<=i;i--)e=[t[i].apply(this,e)];return e[0]}},each:function(t,e,i){if(t)if(E&&t.forEach&&t.forEach===E)t.forEach(e,i);else if(t.length===t.length+0){var n,s=void 0;for(s=0,n=t.length;s<n;s++)if(s in t&&e.call(i,t[s],s)===this.BREAK)return}else for(var r in t)if(e.call(i,t[r],r)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n;return function(){var s=this,r=arguments,o=i||!n;clearTimeout(n),n=setTimeout((function(){n=null,i||t.apply(s,r)}),e),o&&t.apply(s,r)}},toArray:function(t){return t.toArray?t.toArray():S.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}},C=[{litmus:A.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:n},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:n},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:n},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:n}}},{litmus:A.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:A.isArray,conversions:{RGB_ARRAY:{read:function(t){return!(3!==t.length)&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return!(4!==t.length)&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:A.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(A.isNumber(t.r)&&A.isNumber(t.g)&&A.isNumber(t.b)&&A.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(A.isNumber(t.r)&&A.isNumber(t.g)&&A.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(A.isNumber(t.h)&&A.isNumber(t.s)&&A.isNumber(t.v)&&A.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(A.isNumber(t.h)&&A.isNumber(t.s)&&A.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],O=void 0,P=void 0,R=function(){P=!1;var t=1<arguments.length?A.toArray(arguments):arguments[0];return A.each(C,(function(e){if(e.litmus(t))return A.each(e.conversions,(function(e,i){if(O=e.read(t),!1===P&&!1!==O)return P=O,O.conversionName=i,O.conversion=e,A.BREAK})),A.BREAK})),P},L=void 0,M={hsv_to_rgb:function(t,e,i){var n=_(t/60)%6,s=t/60-_(t/60),r=i*(1-e),o=i*(1-s*e),a=i*(1-(1-s)*e),h=[[i,a,r],[o,i,r],[r,i,a],[r,o,i],[a,r,i],[i,r,o]][n];return{r:255*h[0],g:255*h[1],b:255*h[2]}},rgb_to_hsv:function(t,e,i){var n=Math.min(t,e,i),s=Math.max(t,e,i),r=s-n,o=void 0;return 0===s?{h:NaN,s:0,v:0}:(o=t===s?(e-i)/r:e===s?2+(i-t)/r:4+(t-e)/r,0>(o/=6)&&(o+=1),{h:360*o,s:r/s,v:s/255})},rgb_to_hex:function(t,e,i){var n=this.hex_with_component(0,2,t);return n=this.hex_with_component(n,1,e),n=this.hex_with_component(n,0,i)},component_from_hex:function(t,e){return 255&t>>8*e},hex_with_component:function(t,e,i){return i<<(L=8*e)|t&~(255<<L)}},k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},F=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),I=function t(e,i,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in s)return s.value;var o=s.get;return void 0===o?void 0:o.call(n)},B=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},N=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Y=function(){function t(){if(D(this,t),this.__state=R.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return F(t,[{key:"toString",value:function(){return n(this)}},{key:"toHexString",value:function(){return n(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();Y.recalculateRGB=function(t,e,i){if("HEX"===t.__state.space)t.__state[e]=M.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");A.extend(t.__state,M.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},Y.recalculateHSV=function(t){var e=M.rgb_to_hsv(t.r,t.g,t.b);A.extend(t.__state,{s:e.s,v:e.v}),A.isNaN(e.h)?A.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},Y.COMPONENTS=["r","g","b","h","s","v","hex","a"],s(Y.prototype,"r",2),s(Y.prototype,"g",1),s(Y.prototype,"b",0),r(Y.prototype,"h"),r(Y.prototype,"s"),r(Y.prototype,"v"),Object.defineProperty(Y.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(Y.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=M.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var z=function(){function t(e,i){D(this,t),this.initialValue=e[i],this.domElement=document.createElement("div"),this.object=e,this.property=i,this.__onChange=void 0,this.__onFinishChange=void 0}return F(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),U={};A.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){A.each(t,(function(t){U[t]=e}))}));var X=/(\d+(\.\d+)?)px/,G={makeSelectable:function(t,e){void 0===t||void 0===t.style||(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,i){var n=i,s=e;A.isUndefined(s)&&(s=!0),A.isUndefined(n)&&(n=!0),t.style.position="absolute",s&&(t.style.left=0,t.style.right=0),n&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,i,n){var s=i||{},r=U[e];if(!r)throw new Error("Event type "+e+" not supported.");var o=document.createEvent(r);switch(r){case"MouseEvents":var a=s.x||s.clientX||0,h=s.y||s.clientY||0;o.initMouseEvent(e,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,a,h,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=o.initKeyboardEvent||o.initKeyEvent;A.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(e,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break;default:o.initEvent(e,s.bubbles||!1,s.cancelable||!0)}A.defaults(o,n),t.dispatchEvent(o)},bind:function(t,e,i,n){return t.addEventListener?t.addEventListener(e,i,n||!1):t.attachEvent&&t.attachEvent("on"+e,i),G},unbind:function(t,e,i,n){return t.removeEventListener?t.removeEventListener(e,i,n||!1):t.detachEvent&&t.detachEvent("on"+e,i),G},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var i=t.className.split(/ +/);-1===i.indexOf(e)&&(i.push(e),t.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return G},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var i=t.className.split(/ +/),n=i.indexOf(e);-1!==n&&(i.splice(n,1),t.className=i.join(" "))}else t.className=void 0;return G},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return o(e["border-left-width"])+o(e["border-right-width"])+o(e["padding-left"])+o(e["padding-right"])+o(e.width)},getHeight:function(t){var e=getComputedStyle(t);return o(e["border-top-width"])+o(e["border-bottom-width"])+o(e["padding-top"])+o(e["padding-bottom"])+o(e.height)},getOffset:function(t){var e=t,i={left:0,top:0};if(e.offsetParent)do{i.left+=e.offsetLeft,i.top+=e.offsetTop,e=e.offsetParent}while(e);return i},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},W=function(t){function e(t,i){D(this,e);var n=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=n;return n.__prev=n.getValue(),n.__checkbox=document.createElement("input"),n.__checkbox.setAttribute("type","checkbox"),G.bind(n.__checkbox,"change",(function(){s.setValue(!s.__prev)}),!1),n.domElement.appendChild(n.__checkbox),n.updateDisplay(),n}return B(e,t),F(e,[{key:"setValue",value:function(t){var i=I(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),I(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(z),V=function(t){function e(t,i,n){D(this,e);var s=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),r=n,o=s;if(s.__select=document.createElement("select"),A.isArray(r)){var a={};A.each(r,(function(t){a[t]=t})),r=a}return A.each(r,(function(t,e){var i=document.createElement("option");i.innerHTML=e,i.setAttribute("value",t),o.__select.appendChild(i)})),s.updateDisplay(),G.bind(s.__select,"change",(function(){var t=this.options[this.selectedIndex].value;o.setValue(t)})),s.domElement.appendChild(s.__select),s}return B(e,t),F(e,[{key:"setValue",value:function(t){var i=I(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return G.isActive(this.__select)?this:(this.__select.value=this.getValue(),I(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(z),H=function(t){function e(t,i){function n(){r.setValue(r.__input.value)}D(this,e);var s=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),r=s;return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),G.bind(s.__input,"keyup",n),G.bind(s.__input,"change",n),G.bind(s.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),G.bind(s.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return B(e,t),F(e,[{key:"updateDisplay",value:function(){return G.isActive(this.__input)||(this.__input.value=this.getValue()),I(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(z),j=function(t){function e(t,i,n){D(this,e);var s=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),r=n||{};return s.__min=r.min,s.__max=r.max,s.__step=r.step,s.__impliedStep=A.isUndefined(s.__step)?0===s.initialValue?1:T(10,_(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__step,s.__precision=a(s.__impliedStep),s}return B(e,t),F(e,[{key:"setValue",value:function(t){var i=t;return void 0!==this.__min&&i<this.__min?i=this.__min:void 0!==this.__max&&i>this.__max&&(i=this.__max),void 0!==this.__step&&0!=i%this.__step&&(i=w(i/this.__step)*this.__step),I(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=a(t),this}}]),e}(z),K=function(t){function e(t,i,n){function s(){h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function r(t){var e=l-t.clientY;h.setValue(h.getValue()+e*h.__impliedStep),l=t.clientY}function o(){G.unbind(window,"mousemove",r),G.unbind(window,"mouseup",o),s()}D(this,e);var a=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n));a.__truncationSuspended=!1;var h=a,l=void 0;return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),G.bind(a.__input,"change",(function(){var t=parseFloat(h.__input.value);A.isNaN(t)||h.setValue(t)})),G.bind(a.__input,"blur",(function(){s()})),G.bind(a.__input,"mousedown",(function(t){G.bind(window,"mousemove",r),G.bind(window,"mouseup",o),l=t.clientY})),G.bind(a.__input,"keydown",(function(t){13===t.keyCode&&(h.__truncationSuspended=!0,this.blur(),h.__truncationSuspended=!1,s())})),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return B(e,t),F(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(t,e){var i=T(10,e);return w(t*i)/i}(this.getValue(),this.__precision),I(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(j),q=function(t){function e(t,i,n,s,r){function o(t){t.preventDefault();var e=d.__background.getBoundingClientRect();return d.setValue(h(t.clientX,e.left,e.right,d.__min,d.__max)),!1}function a(){G.unbind(window,"mousemove",o),G.unbind(window,"mouseup",a),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function l(t){var e=t.touches[0].clientX,i=d.__background.getBoundingClientRect();d.setValue(h(e,i.left,i.right,d.__min,d.__max))}function u(){G.unbind(window,"touchmove",l),G.unbind(window,"touchend",u),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}D(this,e);var c=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,{min:n,max:s,step:r})),d=c;return c.__background=document.createElement("div"),c.__foreground=document.createElement("div"),G.bind(c.__background,"mousedown",(function(t){document.activeElement.blur(),G.bind(window,"mousemove",o),G.bind(window,"mouseup",a),o(t)})),G.bind(c.__background,"touchstart",(function(t){1!==t.touches.length||(G.bind(window,"touchmove",l),G.bind(window,"touchend",u),l(t))})),G.addClass(c.__background,"slider"),G.addClass(c.__foreground,"slider-fg"),c.updateDisplay(),c.__background.appendChild(c.__foreground),c.domElement.appendChild(c.__background),c}return B(e,t),F(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",I(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(j),J=function(t){function e(t,i,n){D(this,e);var s=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return s.__button=document.createElement("div"),s.__button.innerHTML=void 0===n?"Fire":n,G.bind(s.__button,"click",(function(t){return t.preventDefault(),s.fire(),!1})),G.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return B(e,t),F(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(z),Z=function(t){function e(t,i){function n(t){u(t),G.bind(window,"mousemove",u),G.bind(window,"touchmove",u),G.bind(window,"mouseup",r),G.bind(window,"touchend",r)}function s(t){c(t),G.bind(window,"mousemove",c),G.bind(window,"touchmove",c),G.bind(window,"mouseup",o),G.bind(window,"touchend",o)}function r(){G.unbind(window,"mousemove",u),G.unbind(window,"touchmove",u),G.unbind(window,"mouseup",r),G.unbind(window,"touchend",r),h()}function o(){G.unbind(window,"mousemove",c),G.unbind(window,"touchmove",c),G.unbind(window,"mouseup",o),G.unbind(window,"touchend",o),h()}function a(){var t=R(this.value);!1===t?this.value=f.__color.toString():(f.__color.__state=t,f.setValue(f.__color.toOriginal()))}function h(){f.__onFinishChange&&f.__onFinishChange.call(f,f.__color.toOriginal())}function u(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=f.__saturation_field.getBoundingClientRect(),i=t.touches&&t.touches[0]||t,n=i.clientX,s=i.clientY,r=(n-e.left)/(e.right-e.left),o=1-(s-e.top)/(e.bottom-e.top);return 1<o?o=1:0>o&&(o=0),1<r?r=1:0>r&&(r=0),f.__color.v=o,f.__color.s=r,f.setValue(f.__color.toOriginal()),!1}function c(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=f.__hue_field.getBoundingClientRect(),i=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return 1<i?i=1:0>i&&(i=0),f.__color.h=360*i,f.setValue(f.__color.toOriginal()),!1}D(this,e);var d=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));d.__color=new Y(d.getValue()),d.__temp=new Y(0);var f=d;d.domElement=document.createElement("div"),G.makeSelectable(d.domElement,!1),d.__selector=document.createElement("div"),d.__selector.className="selector",d.__saturation_field=document.createElement("div"),d.__saturation_field.className="saturation-field",d.__field_knob=document.createElement("div"),d.__field_knob.className="field-knob",d.__field_knob_border="2px solid ",d.__hue_knob=document.createElement("div"),d.__hue_knob.className="hue-knob",d.__hue_field=document.createElement("div"),d.__hue_field.className="hue-field",d.__input=document.createElement("input"),d.__input.type="text",d.__input_textShadow="0 1px 1px ",G.bind(d.__input,"keydown",(function(t){13===t.keyCode&&a.call(this)})),G.bind(d.__input,"blur",a),G.bind(d.__selector,"mousedown",(function(){G.addClass(this,"drag").bind(window,"mouseup",(function(){G.removeClass(f.__selector,"drag")}))})),G.bind(d.__selector,"touchstart",(function(){G.addClass(this,"drag").bind(window,"touchend",(function(){G.removeClass(f.__selector,"drag")}))}));var p=document.createElement("div");return A.extend(d.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),A.extend(d.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:d.__field_knob_border+(.5>d.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),A.extend(d.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),A.extend(d.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),A.extend(p.style,{width:"100%",height:"100%",background:"none"}),l(p,"top","rgba(0,0,0,0)","#000"),A.extend(d.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(d.__hue_field),A.extend(d.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:d.__input_textShadow+"rgba(0,0,0,0.7)"}),G.bind(d.__saturation_field,"mousedown",n),G.bind(d.__saturation_field,"touchstart",n),G.bind(d.__field_knob,"mousedown",n),G.bind(d.__field_knob,"touchstart",n),G.bind(d.__hue_field,"mousedown",s),G.bind(d.__hue_field,"touchstart",s),d.__saturation_field.appendChild(p),d.__selector.appendChild(d.__field_knob),d.__selector.appendChild(d.__saturation_field),d.__selector.appendChild(d.__hue_field),d.__hue_field.appendChild(d.__hue_knob),d.domElement.appendChild(d.__input),d.domElement.appendChild(d.__selector),d.updateDisplay(),d}return B(e,t),F(e,[{key:"updateDisplay",value:function(){var t=R(this.getValue());if(!1!==t){var e=!1;A.each(Y.COMPONENTS,(function(i){if(!A.isUndefined(t[i])&&!A.isUndefined(this.__color.__state[i])&&t[i]!==this.__color.__state[i])return e=!0,{}}),this),e&&A.extend(this.__color.__state,t)}A.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var i=.5>this.__color.v||.5<this.__color.s?255:0,n=255-i;A.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+i+","+i+","+i+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,l(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),A.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+i+","+i+","+i+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}}]),e}(z),Q=["-moz-","-o-","-webkit-","-ms-",""],$=function(t,e){var i=t[e];return A.isArray(arguments[2])||A.isObject(arguments[2])?new V(t,e,arguments[2]):A.isNumber(i)?A.isNumber(arguments[2])&&A.isNumber(arguments[3])?A.isNumber(arguments[4])?new q(t,e,arguments[2],arguments[3],arguments[4]):new q(t,e,arguments[2],arguments[3]):A.isNumber(arguments[4])?new K(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new K(t,e,{min:arguments[2],max:arguments[3]}):A.isString(i)?new H(t,e):A.isFunction(i)?new J(t,e,""):A.isBoolean(i)?new W(t,e):null},tt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},et=function(){function t(){D(this,t),this.backgroundElement=document.createElement("div"),A.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),G.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),A.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;G.bind(this.backgroundElement,"click",(function(){e.hide()}))}return F(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),A.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",G.unbind(t.domElement,"webkitTransitionEnd",e),G.unbind(t.domElement,"transitionend",e),G.unbind(t.domElement,"oTransitionEnd",e)};G.bind(this.domElement,"webkitTransitionEnd",e),G.bind(this.domElement,"transitionend",e),G.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-G.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-G.getHeight(this.domElement)/2+"px"}}]),t}();!function(t,e){var i=e||document,n=document.createElement("style");n.type="text/css",n.innerHTML=t;var s=i.getElementsByTagName("head")[0];try{s.appendChild(n)}catch(e){}}(function(t){if("undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var it="Default",nt=function(){try{return!!window.localStorage}catch(t){return!1}}(),st=void 0,rt=!0,ot=void 0,at=!1,ht=[],lt=function t(e){var i=this,n=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),G.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=A.defaults(n,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),n=A.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),A.isUndefined(n.load)?n.load={preset:it}:n.preset&&(n.load.preset=n.preset),A.isUndefined(n.parent)&&n.hideable&&ht.push(this),n.resizable=A.isUndefined(n.parent)&&n.resizable,n.autoPlace&&A.isUndefined(n.scrollable)&&(n.scrollable=!0);var s=nt&&"true"===localStorage.getItem(g(0,"isLocal")),r=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return i.parent?i.getRoot().preset:n.load.preset},set:function(t){i.parent?i.getRoot().preset=t:n.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),i.revert()}},width:{get:function(){return n.width},set:function(t){n.width=t,x(i,t)}},name:{get:function(){return n.name},set:function(t){n.name=t,titleRowName&&(titleRowName.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(e){n.closed=e,n.closed?G.addClass(i.__ul,t.CLASS_CLOSED):G.removeClass(i.__ul,t.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return s},set:function(t){nt&&(s=t,t?G.bind(window,"unload",r):G.unbind(window,"unload",r),localStorage.setItem(g(0,"isLocal"),t))}}}),A.isUndefined(n.parent)){if(n.closed=!1,G.addClass(this.domElement,t.CLASS_MAIN),G.makeSelectable(this.domElement,!1),nt&&s){i.useLocalStorage=!0;var o=localStorage.getItem(g(0,"gui"));o&&(n.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,G.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),n.closeOnTop?(G.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(G.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),G.bind(this.__closeButton,"click",(function(){i.closed=!i.closed}))}else{void 0===n.closed&&(n.closed=!0);var a=document.createTextNode(n.name);G.addClass(a,"controller-name");var h=u(i,a);G.addClass(this.__ul,t.CLASS_CLOSED),G.addClass(h,"title"),G.bind(h,"click",(function(t){return t.preventDefault(),i.closed=!i.closed,!1})),n.closed||(this.closed=!1)}n.autoPlace&&(A.isUndefined(n.parent)&&(rt&&(ot=document.createElement("div"),G.addClass(ot,"dg"),G.addClass(ot,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ot),rt=!1),ot.appendChild(this.domElement),G.addClass(this.domElement,t.CLASS_AUTO_PLACE)),!this.parent&&x(i,n.width)),this.__resizeHandler=function(){i.onResizeDebounced()},G.bind(window,"resize",this.__resizeHandler),G.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),G.bind(this.__ul,"transitionend",this.__resizeHandler),G.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&function(t){function e(e){return e.preventDefault(),t.width+=s-e.clientX,t.onResize(),s=e.clientX,!1}function i(){G.removeClass(t.__closeButton,lt.CLASS_DRAG),G.unbind(window,"mousemove",e),G.unbind(window,"mouseup",i)}function n(n){return n.preventDefault(),s=n.clientX,G.addClass(t.__closeButton,lt.CLASS_DRAG),G.bind(window,"mousemove",e),G.bind(window,"mouseup",i),!1}var s;t.__resize_handle=document.createElement("div"),A.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),G.bind(t.__resize_handle,"mousedown",n),G.bind(t.__closeButton,"mousedown",n),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),r=function(){nt&&"true"===localStorage.getItem(g(0,"isLocal"))&&localStorage.setItem(g(0,"gui"),JSON.stringify(i.getSaveObject()))},this.saveToLocalStorageIfPossible=r,n.parent||function(){var t=i.getRoot();t.width+=1,A.defer((function(){t.width-=1}))}()};lt.toggleHide=function(){at=!at,A.each(ht,(function(t){t.domElement.style.display=at?"none":""}))},lt.CLASS_AUTO_PLACE="a",lt.CLASS_AUTO_PLACE_CONTAINER="ac",lt.CLASS_MAIN="main",lt.CLASS_CONTROLLER_ROW="cr",lt.CLASS_TOO_TALL="taller-than-window",lt.CLASS_CLOSED="closed",lt.CLASS_CLOSE_BUTTON="close-button",lt.CLASS_CLOSE_TOP="close-top",lt.CLASS_CLOSE_BOTTOM="close-bottom",lt.CLASS_DRAG="drag",lt.DEFAULT_WIDTH=245,lt.TEXT_CLOSED="Close Controls",lt.TEXT_OPEN="Open Controls",lt._keydownHandler=function(t){"text"!==document.activeElement.type&&(72===t.which||72===t.keyCode)&&lt.toggleHide()},G.bind(window,"keydown",lt._keydownHandler,!1),A.extend(lt.prototype,{add:function(t,e){return p(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return p(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;A.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&ot.removeChild(this.domElement);var t=this;A.each(this.__folders,(function(e){t.removeFolder(e)})),G.unbind(window,"keydown",lt._keydownHandler,!1),c(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var i=new lt(e);this.__folders[t]=i;var n=u(this,i.domElement);return G.addClass(n,"folder"),i},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],c(t);var e=this;A.each(t.__folders,(function(e){t.removeFolder(e)})),A.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=G.getOffset(t.__ul).top,i=0;A.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(i+=G.getHeight(e))})),window.innerHeight-e-20<i?(G.addClass(t.domElement,lt.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(G.removeClass(t.domElement,lt.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&A.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:A.debounce((function(){this.onResize()}),50),remember:function(){if(A.isUndefined(st)&&((st=new et).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;A.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&y(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&x(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,0<this.__rememberedObjects.length&&(t.preset=this.preset,!t.remembered&&(t.remembered={}),t.remembered[this.preset]=b(this)),t.folders={},A.each(this.__folders,(function(e,i){t.folders[i]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=b(this),d(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[it]=b(this,!0)),this.load.remembered[t]=b(this),this.preset=t,v(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){A.each(this.__controllers,(function(e){this.getRoot().load.remembered?f(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),A.each(this.__folders,(function(t){t.revert(t)})),t||d(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&tt.call(window,(function(){t(e)})),A.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){A.each(this.__controllers,(function(t){t.updateDisplay()})),A.each(this.__folders,(function(t){t.updateDisplay()}))}});var ut={Color:Y,math:M,interpret:R},ct={Controller:z,BooleanController:W,OptionController:V,StringController:H,NumberController:j,NumberControllerBox:K,NumberControllerSlider:q,FunctionController:J,ColorController:Z},dt={dom:G},ft={GUI:lt},pt=lt;e.default={color:ut,controllers:ct,dom:dt,gui:ft,GUI:pt}},function(t,e){"use strict";function i(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.defaultLanguage="en",this.availableLanguages=["en"],this.translations=e.json.get("translations");var i=navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||this.defaultLanguage;this.languageCode=null==i||!1===i||"string"!=typeof i?this.defaultLanguage:2<i.length?i.substr(0,2):i,-1==this.availableLanguages.indexOf(this.languageCode)&&(this.languageCode=this.defaultLanguage)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"translate",value:function(t){return this.translations[this.languageCode][t]?this.translations[this.languageCode][t]:"MISS KEY $".concat(t)}},{key:"translateWithParams",value:function(t,e){var i=this.translate(t);return e.forEach((function(t,e){i=i.replace("$[".concat(e,"]"),t)})),i}},{key:"changeLanguage",value:function(){var t=this.availableLanguages.indexOf(this.languageCode);++t>=this.availableLanguages.length&&(t=0),this.languageCode=this.availableLanguages[t]}},{key:"getSufix",value:function(){return"en"==this.languageCode?"":"_".concat(this.languageCode)}}]),t}();e.default=function(t){return n||(n=new s(t)),n}},function(t,e){"use strict";function i(t){return function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.actor=e.actor,this.stateconfig=e.states,this.stateNames=Object.keys(this.stateconfig),this.state="idle",e.actor.setStateHandler(this),this.sounds=[],this.registerSounds()}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(t,[{key:"set",value:function(t){if(this.status=t,-1!==this.stateNames.indexOf(this.status)){this.removeEvents(),this.stopSounds(),this.state=this.stateconfig[t],this.actor.anims.play(this.state.anim.key),this.state.oncomplete&&this.actor.on("animationcomplete",this.onAnimationComplete,this),this.state.onupdate&&this.actor.on("animationupdate",this.onAnimationUpdate,this);var e=this.state.sound;e&&this.sounds[e.name].play(e.play)}}},{key:"onAnimationComplete",value:function(){this.actor.off("animationcomplete");var t=this.state.oncomplete;this[t.trigger].apply(this,i(t.values))}},{key:"onAnimationUpdate",value:function(t,e){var n=this.state.onupdate;e.index===n.frame&&this[n.trigger].apply(this,i(n.values))}},{key:"removeEvents",value:function(){this.actor.off("animationcomplete"),this.actor.off("animationupdate")}},{key:"triggerOnActor",value:function(t,e){var n;(n=this.actor)[t].apply(n,i(e))}},{key:"registerSounds",value:function(){var t=this;this.stateNames.forEach((function(e){var i=t.stateconfig[e].sound;i&&(t.sounds[i.name]=t.actor.scene.sound.add(i.name,i.config))}))}},{key:"stopSounds",value:function(){var t=this;Object.keys(this.sounds).forEach((function(e){t.sounds[e].stop()}))}},{key:"destroy",value:function(){var t=this;this.removeEvents(),this.stopSounds(),Object.keys(this.sounds).forEach((function(e){t.sounds[e].destroy()}))}},{key:"pause",value:function(){var t=this.state.sound;t&&this.sounds[t.name].pause()}},{key:"resume",value:function(){var t=this.state.sound;t&&this.sounds[t.name].resume()}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(84)),r=n(i(1463)),o={};s.default.RUNNING_STATS&&(o=function(){var t=new r.default,e=new r.default,i=new r.default,n=new r.default,s=n.addPanel(new r.default.Panel("custom","#ff8","#221"));return t.showPanel(0),e.showPanel(1),i.showPanel(2),n.showPanel(3),[t,e,i,n].forEach((function(t,e){t.domElement.style.position="absolute",t.domElement.style.left="inherit",t.domElement.style.right="".concat(100*e,"px"),t.domElement.style.top="0px",document.body.appendChild(t.domElement)})),{begin:function(){t.begin(),e.begin(),i.begin(),n.begin()},end:function(r){t.end(),e.end(),i.end(),n.end(),r.hasOwnProperty("custom")&&s.update(r.custom,2)}}}());var a=o;e.default=a},function(t){var e;t.exports=((e=function(){function t(t){return s.appendChild(t.dom),t}function i(t){for(var e=0;e<s.children.length;e++)s.children[e].style.display=e===t?"block":"none";n=t}var n=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",(function(t){t.preventDefault(),i(++n%s.children.length)}),!1);var r=(performance||Date).now(),o=r,a=0,h=t(new e.Panel("FPS","#0ff","#002")),l=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new e.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:s,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(l.update(t-r,200),t>o+1e3&&(h.update(1e3*a/(t-o),100),o=t,a=0,u)){var e=performance.memory;u.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:s,setMode:i}}).Panel=function(t,e,i){var n=1/0,s=0,r=Math.round,o=r(window.devicePixelRatio||1),a=80*o,h=48*o,l=3*o,u=2*o,c=3*o,d=15*o,f=74*o,p=30*o,g=document.createElement("canvas");g.width=a,g.height=h,g.style.cssText="width:80px;height:48px";var v=g.getContext("2d");return v.font="bold "+9*o+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=i,v.fillRect(0,0,a,h),v.fillStyle=e,v.fillText(t,l,u),v.fillRect(c,d,f,p),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(c,d,f,p),{dom:g,update:function(h,m){n=Math.min(n,h),s=Math.max(s,h),v.fillStyle=i,v.globalAlpha=1,v.fillRect(0,0,a,d),v.fillStyle=e,v.fillText(r(h)+" "+t+" ("+r(n)+"-"+r(s)+")",l,u),v.drawImage(g,c+o,d,f-o,p,c,d,f-o,p),v.fillRect(c+f-o,d,o,p),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(c+f-o,d,o,r((1-h/m)*p))}}},e)},function(t,e){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?a(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=s(this,r(e).call(this,t.scene,t.x,t.y,t.style.font,t.text,t.size,t.align))).style=t.style,i.keyText=t.keyText,i.text=t.text,i.setTint(i.style.color),i.setScale(t.scale||i.style.scale),i.setData("type","button"),i.setOrigin(0,0),i.reloadText(),i.setInteractive(new Phaser.Geom.Rectangle(0,0,i.width,i.height),Phaser.Geom.Rectangle.Contains),t.onHover&&(i.onHover=function(){return t.onHover(a(a(i)))}),t.onOut&&(i.onOut=function(){return t.onOut(a(a(i)))}),t.onClick&&(i.onClick=function(){return t.onClick(a(a(i)))}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,Phaser.GameObjects.BitmapText),function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(e,[{key:"onHover",value:function(){this.setTint(this.style.hoverColor)}},{key:"onOut",value:function(){this.setTint(this.style.color)}},{key:"onClick",value:function(){}},{key:"reloadText",value:function(){var t=this.keyText?this.scene.getText(this.keyText):this.text;this.setText(t)}}]),e}();e.default=h},function(t,e){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?a(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=s(this,r(e).call(this,t.scene,t.x,t.y,t.style.font,t.text,t.size,t.align))).style=t.style,i.keyText=t.keyText,i.srcText=t.text,i.text=t.text,i.setTint(i.style.color),i.setScale(t.scale||i.style.scale),i.setOrigin(0,0),i.setDisplayCallback(t.displayCallback||i.displayCallback.bind(a(a(i)))),i.reloadText(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,Phaser.GameObjects.DynamicBitmapText),function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(e,[{key:"reloadText",value:function(t){var e=this;this.modificationIndexes=[];var i=[],n=this.keyText?this.scene.getText(this.keyText):this.srcText;t&&(n=t.keyText?this.scene.getText(t.keyText):t.text);for(var s=/\[([\w,;{}\[\]\s]+[.?!]*)\]\((\w+)\)/;null!==(i=s.exec(n));)n=n.replace(i[0],(function(t,i){var n=/\[([\w,;{}\[\]\s]+[.?!]*)\]/.exec(t)[1];return e.modificationIndexes.push({startsAt:i,endsAt:i+n.length-1,color:/\((\w+)\)/.exec(t)[1]}),n}));this.setText(n)}},{key:"displayCallback",value:function(t){t.color=this.style.color||16777215;var e=this.modificationIndexes.find((function(e){return t.index>=e.startsAt&&t.index<=e.endsAt}));return null!=e&&(t.color=e.color),t}}]),e}();e.default=h},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t,e,i){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=r(this,a(e).call(this,{key:"bootScene"}))).nextScene=t.constants.AFTER_BOOT_SCENE,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(e,[{key:"preload",value:function(){var t=this;o(a(e.prototype),"preload",this).call(this),this.add.image(0,0,"mainBG").setOrigin(0,0),this.add.image(320,400,"title");var i=this.add.graphics(),n=this.add.graphics(),s=this.cameras.main.width,r=this.cameras.main.height,h=this.add.text(s/2,r/2+100,"LOADING...",{fontFamily:"CalvertMT-Bold",color:"#fff",align:"center",fontSize:"56px"});h.setStroke("#000",6),h.setOrigin(.5,.5);var l=this.add.text(s/2,r/2+190,"0%",{fontFamily:"CalvertMT-Bold",color:"#fff",align:"center",fontSize:"32px"});l.setStroke("#000",4),l.setOrigin(.5,.5);var u=this.add.text(s/2,r/2+270,"",{fontFamily:"CalvertMT-Bold",color:"#fff",align:"center",fontSize:"36px"});u.setStroke("#000000",4),u.setOrigin(.5,.5),i.fillStyle(6710886,1),i.fillRect(s/2-300,r/2+140,600,100),this.load.on("progress",(function(t){n.clear(),n.fillStyle(3355443,1),n.fillRect(s/2+10-300,r/2+150,580*t,80),l.setText(parseInt(100*t)+"%")})),this.load.on("fileprogress",(function(t){u.setText(t.key+" ready")})),this.load.on("complete",(function(){n.destroy(),i.destroy(),h.destroy(),l.destroy(),u.destroy(),t.changeToScene(t.nextScene)}));var c;c="https://agar3s-assets.s3.amazonaws.com/dwarfEmpire/",this.load.image("logo",c+"assets/phaserLogo.png");var d="".concat(c,"assets/sprites/ui/");this.load.image("avatar",d+"avatar.png"),this.load.image("mainBG",d+"de_bg.jpg"),this.load.image("businessBg",d+"section_bg.png"),this.load.image("businnesDisabled",d+"section_disabled.png"),this.load.image("iconBg",d+"icon_bg.png"),this.load.image("iconBar",d+"icon_bar.png"),this.load.image("iconBarLoad",d+"icon_bar_load.png"),this.load.image("progressLoadBar",d+"load_bar.png"),this.load.image("progressFillBar",d+"load_fill_bar.png"),this.load.image("buyButton",d+"buy_button.png"),this.load.image("buyButtonHover",d+"buy_button_hover.png"),this.load.image("buyButtonPressed",d+"buy_button_pressed.png"),this.load.image("buyButtonDisabled",d+"buy_button_disabled.png"),this.load.image("timeBox",d+"time_box.png"),this.load.image("hireButton",d+"hire_button.png"),this.load.image("hireButtonHover",d+"hire_button_hover.png"),this.load.image("hireButtonPressed",d+"hire_button_pressed.png"),this.load.image("hireButtonDisabled",d+"hire_button_disabled.png"),this.load.image("managerBG",d+"manager_bg.png"),this.load.image("infoBox",d+"info.png"),this.load.image("dwarfKing",d+"dwarf.png"),this.load.image("arrow",d+"arrow.png"),this.load.image("notificationBG",d+"notification.png"),this.load.spritesheet("progressSpriteBar",d+"load_fill_bar_sprite.png",{frameWidth:344,frameHeight:34});var f="".concat(c,"assets/sprites/characters/");this.load.spritesheet("dwarf1",f+"dwarf1.png",{frameWidth:52,frameHeight:72}),this.load.spritesheet("dwarf2",f+"dwarf2.png",{frameWidth:52,frameHeight:72}),this.load.spritesheet("dwarf1_emote",f+"dwarf1_emote.png",{frameWidth:52,frameHeight:72}),this.load.spritesheet("dwarf2_emote",f+"dwarf2_emote.png",{frameWidth:52,frameHeight:72});var p="".concat(c,"assets/sprites/business/");if(this.load.image("mines",p+"mines.png"),this.load.image("drill",p+"drill.png"),this.load.image("tavern",p+"tavern.png"),this.load.image("forge",p+"forge.png"),this.load.image("jewelery",p+"jewelery.png"),this.load.image("trade",p+"trade.png"),this.load.image("castle",p+"castle.png"),this.load.image("army",p+"army.png"),this.load.image("quest",p+"quest.png"),this.load.image("coin",p+"coin.png"),this.load.audio("bgMain",c+"assets/audio/bg/main.ogg"),this.load.audio("sfxNotification",c+"assets/audio/fx/notification.ogg"),this.load.audio("sfxInvest",c+"assets/audio/fx/invest.ogg"),this.load.audio("sfxInvestAvailable",c+"assets/audio/fx/investAvailable.ogg"),this.load.audio("sfxManagerAvailable",c+"assets/audio/fx/managerAvailable.ogg"),this.load.audio("sfxProduce",c+"assets/audio/fx/produce.ogg"),this.load.audio("sfxMinerProduce",c+"assets/audio/fx/minerProduce.ogg"),this.load.audio("sfxForgeProduce",c+"assets/audio/fx/forgeProduce.ogg"),this.load.audio("sfxJeweleryProduce",c+"assets/audio/fx/jeweleryProduce.ogg"),this.load.audio("sfxTradeProduce",c+"assets/audio/fx/tradeProduce.ogg"),this.load.audio("sfxArmyProduce",c+"assets/audio/fx/armyProduce.ogg"),this.load.audio("sfxQuestProduce",c+"assets/audio/fx/questProduce.ogg"),this.load.audio("sfxHireManager",c+"assets/audio/fx/hireManager.ogg"),this.load.audio("sfxUnlockBusiness",c+"assets/audio/fx/unlockBusiness.ogg"),this.load.audio("sfxBusinessUnlocked",c+"assets/audio/fx/businessUnlocked.ogg"),this.load.audio("sfxTutorialAppears",c+"assets/audio/fx/tutorialAppears.ogg"),this.load.json("translations",c+"assets/texts.json"),this.constants.FAKE_LOADER_ACTIVE)for(var g=0;500>g;g++)this.load.spritesheet("logo-".concat(g),c+"assets/phaserLogo.png",{frameWidth:382,frameHeight:331})}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(72)).default);e.default=l},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t,e,i){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=r(this,a(e).call(this,{key:"splashScene"}))).timesplash=t.constants.TIME_SPLASH,t.nextScene="madeWithScene",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(e,[{key:"create",value:function(t){var i=this;o(a(e.prototype),"create",this).call(this,t),this.logo=this.add.sprite(this.cameras.main.width/2,this.cameras.main.height/2,"logo"),this.time.delayedCall(this.timesplash,(function(){i.changeToScene(i.nextScene)}),[],this)}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(72)).default);e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function o(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=n(i(72)),c=(n(i(38)),function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,h(e).call(this,{key:"madeWithScene"}))).timesplash=t.constants.TIME_MADE_WITH,t.nextScene="mainMenu",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),function(t,e,i){e&&r(t.prototype,e),i&&r(t,i)}(e,[{key:"create",value:function(t){var i=this;a(h(e.prototype),"create",this).call(this,t),this.events.on("shutdown",(function(){return i.shutdown()}),this),this.logo=this.add.sprite(this.cameras.main.width/2,this.cameras.main.height/2,"logo"),this.cameras.main.fade(this.constants.TIME_MADE_WITH/2),this.time.delayedCall(this.timesplash,(function(){i.changeToScene(i.nextScene)}),[],this),this.cameras.main.width*=this.constants.SCALE,this.cameras.main.height*=this.constants.SCALE,this.cameras.main.fadeIn(.35*this.constants.TIME_MADE_WITH),this.time.delayedCall(.65*this.constants.TIME_MADE_WITH,(function(){i.cameras.main.fadeOut(.35*i.constants.TIME_MADE_WITH)}),[],this)}},{key:"shutdown",value:function(){this.events.off("shutdown")}}]),e}(u.default));e.default=c},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t,e,i){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,a(e).call(this,{key:"creditsScene"}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(e,[{key:"create",value:function(t){var i=this;o(a(e.prototype),"create",this).call(this,t),[{textKey:"credits_title",y:10,size:12,color:699391},{textKey:"credits_subtitle",y:40,size:8,color:9995453},{textKey:"credits_design_1",y:70,color:16764416},{textKey:"credits_design_2",y:82},{textKey:"credits_programming_1",y:106,color:16764416},{textKey:"credits_programming_2",y:118},{textKey:"credits_audio_1",y:142,color:16764416},{textKey:"credits_audio_2",y:154},{textKey:"credits_art_1",y:178,color:16764416},{textKey:"credits_art_2",y:190},{textKey:"credits_fonts",y:200,size:8,color:9995453}].forEach((function(t){i.addBitmapText(t)})),this.back=this.createButton({x:10,y:215,keyText:"back",style:this.fonts.BM_kenneyMiniSquare,size:14,onClick:function(){return i.close()}})}},{key:"addBitmapText",value:function(t){this.add.bitmapText(this.cameras.main.width/2,t.y,this.fonts.BM_kenneyMiniSquare.font,this.getText(t.textKey),t.size||10).setCenterAlign().setTint(t.color||16777215).setOrigin(.5,0)}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(72)).default);e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function o(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=n(i(72)),c=n(i(38)),d=n(i(84)),f=n(i(122)),p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,h(e).call(this,{key:"HUDGameScene"}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),function(t,e,i){e&&r(t.prototype,e),i&&r(t,i)}(e,[{key:"create",value:function(t){var i=this;a(h(e.prototype),"create",this).call(this,t),this.sceneManager.addGameScene(this.scene.key);var n=this.add.graphics();n.fillStyle(0,.75),n.fillRect(0,0,640,165);this.add.sprite(620,35,"coin").setOrigin(1,0).setScale(.8);this.add.sprite(25,15,"avatar").setOrigin(0),this.moneyLabel=this.add.text(620,120,"0",{fontFamily:"CalvertMT-Bold",color:"#fff",align:"right",fontSize:"28px"}),this.moneyLabel.setStroke("#000000",8),this.moneyLabel.setOrigin(1,.5),this.nameLabel=this.add.text(170,45,c.default.stats.character.name,{fontFamily:"CalvertMT-Bold",color:"#ffb200",align:"left",fontSize:"30px"}),this.nameLabel.setStroke("#000000",8),this.nameLabel.setOrigin(0,.5),this.titleLabel=this.add.text(170,80,c.default.stats.character.title,{fontFamily:"CalvertMT-Bold",color:"#fff",align:"left",fontSize:"22px"}),this.titleLabel.setStroke("#000000",8),this.titleLabel.setOrigin(0,.5),c.default.setListener("character.title",(function(t){return i.titleLabel.text=t})),this.levelLabel=this.add.text(170,120,"Level ".concat(c.default.stats.character.level),{fontFamily:"CalvertMT-Bold",color:"#ffed32",align:"left",fontSize:"30px"}),this.levelLabel.setStroke("#000000",8),this.levelLabel.setOrigin(0,.5),c.default.setListener("character.level",(function(t){return i.levelLabel.text="Level ".concat(t)})),this.buildInfoContainer(),this.buildNotificationContainer(),this.loadTrigger()}},{key:"buildInfoContainer",value:function(){var t=this;this.infoContainer=this.add.container(0,1e3);var e=this.add.sprite(600,0,"dwarfKing");e.setOrigin(1,1),this.infoContainer.add(e);var i=this.add.sprite(320,240,"infoBox");i.setOrigin(.5,1),this.infoContainer.add(i),this.infoText=this.add.text(50,20,c.default.stats.tutorial.text,{fontFamily:"CalvertMT-Bold",color:"#fff",align:"left",fontSize:"32px",wordWrap:{width:540}}),this.infoText.setStroke("#000000",6),this.infoText.setOrigin(0,0),this.infoContainer.add(this.infoText),this.infoContainer.setVisible(c.default.stats.tutorial.open),this.openInfoTween=this.tweens.add({targets:this.infoContainer,alpha:1,ease:"Cubic.easeOut",duration:500,paused:!0}),this.closeInfoTween=this.tweens.add({targets:this.infoContainer,alpha:0,ease:"Cubic.easeOut",duration:500,paused:!0,onComplete:function(){t.infoContainer.setVisible(!1)}});var n=this.sound.add("sfxTutorialAppears");c.default.setListener("tutorial.open",(function(e){e?(t.displayInfo(),n.play()):t.hideInfo()}))}},{key:"buildNotificationContainer",value:function(){var t=this;this.notificationContainer=this.add.container(0,-200);var e=this.add.sprite(320,10,"notificationBG").setOrigin(.5,0);this.notificationContainer.add(e);var i=this.add.sprite(85,90,"iconBg");this.notificationContainer.add(i),this.icon=this.add.sprite(40,55,"mines"),this.notificationContainer.add(this.icon),this.notificationText=this.add.text(160,40,"Miners increase speed X2",{fontFamily:"CalvertMT-Bold",color:"#fff",align:"left",fontSize:"32px",wordWrap:{width:450}}),this.notificationText.setStroke("#000000",6),this.notificationText.setOrigin(0,0),this.notificationContainer.add(this.notificationText),this.showNotificationTween=this.tweens.add({targets:this.notificationContainer,y:0,ease:"Cubic.easeInOut",duration:500,hold:2e3,yoyo:!0,paused:!0});var n=this.sound.add("sfxNotification");c.default.setListener("notification.open",(function(e){e&&(t.displayNotification(),n.play())}))}},{key:"displayNotification",value:function(){var t=c.default.stats.notification;this.icon.destroy(),this.notificationText.text=t.text,this.icon=this.add.sprite(50,55,t.icon).setOrigin(0),this.notificationContainer.add(this.icon),this.showNotificationTween.play()}},{key:"loadTrigger",value:function(){var t=c.default.stats.tutorial.triggers;t||delete this.trigger,this.trigger=d.default.TRIGGERS[t]}},{key:"displayInfo",value:function(){this.infoContainer.setAlpha(0),this.infoContainer.setVisible(!0),this.openInfoTween.play()}},{key:"hideInfo",value:function(){this.trigger&&this.trigger.keepOpen||this.closeInfoTween.play()}},{key:"checkTrigger",value:function(){c.default.get(this.trigger.watch)<this.trigger.condition||(c.default.set("tutorial.text",this.trigger.text),this.infoText.text=this.trigger.text,c.default.set("tutorial.open",!0),c.default.set("tutorial.arrow",this.trigger.arrow),c.default.set("tutorial.triggers",this.trigger.nextTrigger||null),this.loadTrigger())}},{key:"update",value:function(){var t=f.default.parseGold(.01*c.default.stats.game.money);this.moneyLabel.text="".concat(t.value," ").concat(t.units),this.trigger&&this.checkTrigger()}}]),e}(u.default);e.default=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(s)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=n(i(72)),f=n(i(38)),p=n(i(84)),g=n(i(1472)),v=n(i(271)),m=n(i(165)),y=n(i(270)),x=n(i(122)),b=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=h(this,u(e).call(this,{key:"gameScene"}))).businesses={},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),function(t,e,i){e&&a(t.prototype,e),i&&a(t,i)}(e,[{key:"create",value:function(t){var i=this;l(u(e.prototype),"create",this).call(this,t),this.id=Math.random(),this.sceneManager.addGameScene(this.scene.key),this.sceneManager.overlay("HUDGameScene"),this.events.on("shutdown",(function(){return i.shutdown()}),this),this.events.on("pause",(function(){return i.pause()}),this),this.events.on("resume",(function(){return i.resume()}),this),this.bg=this.add.sprite(0,0,"mainBG").setOrigin(0),this.cameras.main.setSize(640,1280),this.setupBusinesses(),this.bg.setInteractive({draggable:!0});var n=0;this.bg.on("pointerdown",(function(){return n=i.bg.y})),this.bg.on("drag",(function(t,e,s){var r=n-s;i.scrollCamera(r),n=s})),this.input.on("wheel",(function(t,e,n,s){i.scrollCamera(s)})),this.sfxInvest=this.sound.add("sfxInvest"),this.sfxHireManager=this.sound.add("sfxHireManager"),this.sfxUnlockBusiness=this.sound.add("sfxUnlockBusiness"),this.sfxBusinessUnlocked=this.sound.add("sfxBusinessUnlocked"),this.sfxInvestAvailable=this.sound.add("sfxProduce"),this.sfxInvestAvailable.volume=.1,this.sfxManagerAvailable=this.sound.add("sfxManagerAvailable"),this.bgMain=this.sound.add("bgMain"),this.bgMain.volume=.05,this.bgMain.play({loop:!0}),this.coins=this.add.particles("coin"),this.coinsEmitter=this.coins.createEmitter({x:120,y:300,lifespan:2e3,gravityY:1e3,angle:{min:225,max:315},speed:{min:-200,max:400},scale:{min:.5,max:.8}}),this.coinsEmitter.explode(0,0,0),this.constants.DAT_GUI_ENABLE&&(f.default.setListener("mainScene.rotationRatio",(function(t){i.rotationRatio=t})),f.default.setListener("mainScene.logoPosition.x",(function(){})),f.default.setListener("mainScene.logoPosition.y",(function(){})),f.default.setListener("actor.state",(function(){}))),this.timeToSave=5e3,(0,v.default)().addSubscriber(this)}},{key:"scrollCamera",value:function(t){this.cameras.main.scrollY+=.5*t,0>this.cameras.main.scrollY?this.cameras.main.scrollY=0:400<this.cameras.main.scrollY&&(this.cameras.main.scrollY=400),this.bg.y=this.cameras.main.scrollY}},{key:"setupBusinesses",value:function(){var t=this,e=0;if(p.default.BUSINESS_KEYS.forEach((function(i,n){var s=new g.default(function(t){for(var e=1;e<arguments.length;e++){var i=null==arguments[e]?{}:arguments[e],n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){o(t,e,i[e])}))}return t}({scene:t,x:0,y:165*(n+1)+20,key:i},p.default.BUSINESSES[i]));s.on("moneyEarned",(function(e){t.addMoney(e)})),s.on("investIntent",(function(){t.checkInvesment(s)})),s.on("hireIntent",(function(){t.checkHire(s)})),s.on("produce",(function(){s.sfxProduce.play()})),s.on("newBusinessUnlocked",(function(){t.sfxUnlockBusiness.play()})),s.on("businessStarted",(function(){t.sfxBusinessUnlocked.play()})),s.on("investmentAvailable",(function(){t.sfxInvestAvailable.play()})),s.on("managerAvailable",(function(){t.sfxManagerAvailable.play()})),t.add.existing(s),t.businesses[i]=s,e+=s.calculateIdleAway()})),e){var i=x.default.parseGold(.01*e);f.default.stats.notification.icon="coin",f.default.stats.notification.text="We made ".concat(i.value).concat(i.units?" "+i.units:""," while you were away"),setTimeout((function(){return f.default.set("notification.open",!0)}),500),this.addMoney(e)}f.default.stats.tutorial.open&&this.setArrow(f.default.stats.tutorial.arrow),f.default.setListener("tutorial.arrow",(function(e){t.setArrow(e)}))}},{key:"addMoney",value:function(t){f.default.set("game.money",f.default.stats.game.money+t)}},{key:"addMoneySpent",value:function(t){f.default.stats.game.moneySpent+=t,.01*f.default.stats.game.moneySpent>Math.pow(1.8,f.default.stats.character.level+8)&&this.levelUp()}},{key:"levelUp",value:function(){f.default.set("character.level",f.default.stats.character.level+1),f.default.set("character.title",p.default.TITLES[parseInt(f.default.stats.character.level/5)]||"DWARF GOD")}},{key:"checkInvesment",value:function(t){f.default.stats.game.money<t.cost||(this.addMoney(-t.cost),this.addMoneySpent(t.cost),t.invest(),this.sfxInvest.play(),this.coinsEmitter.explode(p.default.BUSINESSES[t.key].coinsEmit,t.x+90,t.y+60))}},{key:"checkHire",value:function(t){f.default.stats.game.money<t.managerCost||(this.addMoney(-t.managerCost),this.addMoneySpent(t.managerCost),t.hireManager(),this.sfxHireManager.play(),this.coinsEmitter.explode(10*p.default.BUSINESSES[t.key].coinsEmit,t.x+90,t.y+60))}},{key:"setArrow",value:function(t){var e=r(t.split("."),2),i=e[0],n=e[1];this.children.bringToTop(this.businesses[i]),this.businesses[i].displayArrowOn(n),this.children.bringToTop(this.coins)}},{key:"shutdown",value:function(){this.events.off("shutdown"),this.constants.DAT_GUI_ENABLE&&(f.default.removeListener("mainScene.rotationRatio"),f.default.removeListener("mainScene.logoPosition.x"),f.default.removeListener("mainScene.logoPosition.y"),f.default.removeListener("actor.state"))}},{key:"updateIdle",value:function(t){this.timeToSave-=t,0>this.timeToSave&&((0,m.default)("dwarfEmpire").save({data:f.default.stats,useHash:!0}),y.default.saveGame(f.default.stats),this.timeToSave=5e3)}},{key:"update",value:function(t,i){l(u(e.prototype),"update",this).call(this,t,i)}},{key:"updateCustomStats",value:function(){}},{key:"pause",value:function(){}},{key:"resume",value:function(){}}]),e}(d.default);e.default=b},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function o(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?l(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=n(i(1473)),c=n(i(1474)),d=n(i(1475)),f=n(i(1476)),p=n(i(1477)),g=n(i(271)),v=n(i(38)),m=n(i(122)),y=[25,50,100,200,300,400,500,600,700,800,900,1e3],x=function(t){function e(t){var i;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),(i=o(this,a(e).call(this,t.scene,t.x,t.y))).key=t.key,i._icon=t.icon,v.default.bs[i.key],i.coefficient=t.coefficient,i.baseRevenue=t.revenue,i.baseTime=1e3*t.time,i.baseCost=t.cost,i.managerCost=t.managerCost;for(var n=0;n<y.length;n++)if(v.default.bs[i.key].investments<y[n]){i.nextUnlockIndex=n;break}i.time=0,i.evaluateUpdateTimers(),i.locked=0==v.default.bs[i.key].investments;var s=t.scene.add.sprite(3,0,"businessBg").setOrigin(0);return i.add(s),i.icon=new u.default({scene:t.scene,x:32,y:18,icon:t.icon}),i.add(i.icon),i.icon.updateInvestmentLabel(v.default.bs[i.key].investments,y[i.nextUnlockIndex],y[i.nextUnlockIndex-1]||0),i.sfxProduce=t.scene.sound.add(t.sfx),i.icon.on("produce",i.produce,l(l(i))),i.progressBar=new c.default({scene:t.scene,x:168,y:24,auto:!i.updateTimers}),i.progressBar.updateRevenueText(m.default.parseGold(i.baseRevenue*v.default.bs[i.key].investments*.01)),i.add(i.progressBar),i.timeContainer=new f.default({scene:t.scene,x:400,y:80}),i.add(i.timeContainer),i.managerContainer=new p.default({scene:t.scene,x:524,y:32,businessKey:t.key,managerKey:t.managerKey,managerIndex:t.managerIndex,managerCost:t.managerCost}),i.managerContainer.on("hire",(function(){i.emit("hireIntent")})),i.add(i.managerContainer),i.investButton=new d.default({scene:t.scene,x:168,y:64}),i.investButton.on("invest",(function(){i.emit("investIntent")})),i.updateCost(),i.overlayLocked=t.scene.add.sprite(3,0,"businnesDisabled").setOrigin(0),i.add(i.overlayLocked),i.add(i.investButton),i.setLocked(i.locked),(0,g.default)().addSubscriber(l(l(i))),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,Phaser.GameObjects.Container),function(t,e,i){e&&r(t.prototype,e),i&&r(t,i)}(e,[{key:"calculateIdleAway",value:function(){var t=v.default.bs[this.key];if(!t.producing)return 0;var e=+new Date-t.timeTriggered,i=this.baseTime/t.speed,n=parseInt(e/i),s=this.baseRevenue*t.investments;return 1<n&&!t.manager&&(n=1,v.default.bs[this.key].producing=!1),(t.manager||0>=n)&&(this.time=i-e%i),n*s}},{key:"setLocked",value:function(t){this.locked=t,this.icon.visible=!this.locked,this.progressBar.visible=!this.locked,this.timeContainer.visible=!this.locked,this.managerContainer.visible=!this.locked,this.overlayLocked.visible=this.locked}},{key:"produce",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;v.default.bs[this.key].producing||(v.default.bs[this.key].timeTriggered=+new Date,v.default.bs[this.key].producing=!0,this.time=this.baseTime-t,!v.default.bs[this.key].manager&&this.emit("produce"))}},{key:"earnMoney",value:function(t){this.time=0,v.default.bs[this.key].producing=!1,this.emit("moneyEarned",this.baseRevenue*v.default.bs[this.key].investments),v.default.bs[this.key].manager&&this.produce(t)}},{key:"getProductivity",value:function(){return 10*this.baseRevenue*v.default.bs[this.key].investments*v.default.bs[this.key].speed/this.baseTime}},{key:"invest",value:function(){v.default.bs[this.key].investments+=1,this.updateCost(),this.checkUnlock(),this.icon.updateInvestmentLabel(v.default.bs[this.key].investments,y[this.nextUnlockIndex],y[this.nextUnlockIndex-1]||0);var t=this.updateTimers?this.baseRevenue*v.default.bs[this.key].investments*.01:this.getProductivity();this.progressBar.updateRevenueText(m.default.parseGold(t)),1==v.default.bs[this.key].investments&&(this.setLocked(!1),this.emit("businessStarted"))}},{key:"hireManager",value:function(){v.default.bs[this.key].manager=!0,this.checkProgressBarUpdate(),this.managerContainer.setHasManager(!0),this.produce()}},{key:"updateCost",value:function(){this.cost=Math.round(Math.pow(this.coefficient,v.default.bs[this.key].investments)*this.baseCost),this.investButton.updateText(m.default.parseGold(.01*this.cost))}},{key:"displayNotification",value:function(t){v.default.stats.notification.icon=this._icon,v.default.stats.notification.text=t,v.default.set("notification.open",!0)}},{key:"checkUnlock",value:function(){v.default.bs[this.key].investments!=y[this.nextUnlockIndex]||(this.nextUnlockIndex+=1,v.default.bs[this.key].speed*=2,this.displayNotification("".concat(this.key," speed increased X2")),this.checkProgressBarUpdate())}},{key:"checkCosts",value:function(){(this.investButton.setEnabled(v.default.stats.game.money>=this.cost)&&(0==v.default.bs[this.key].investments?this.emit("newBusinessUnlocked"):this.emit("investmentAvailable")),v.default.bs[this.key].manager)||this.managerContainer.setEnabled(v.default.stats.game.money>=this.managerCost)&&this.emit("managerAvailable")}},{key:"evaluateUpdateTimers",value:function(){this.updateTimers=!v.default.bs[this.key].manager||500<this.baseTime/v.default.bs[this.key].speed}},{key:"checkProgressBarUpdate",value:function(){this.updateTimers&&(this.evaluateUpdateTimers(),!this.updateTimers&&(this.timeContainer.updateTime(0),this.progressBar.setAuto()))}},{key:"displayArrowOn",value:function(t){console.log(t),"icon"===t?(this.bringToTop(this.icon),this.icon.displayArrow()):"invest"===t?(this.bringToTop(this.investButton),this.investButton.displayArrow()):"manager"===t&&(this.bringToTop(this.managerContainer),this.managerContainer.displayArrow())}},{key:"updateIdle",value:function(t){this.checkCosts(),v.default.bs[this.key].producing&&(this.time-=t*v.default.bs[this.key].speed,this.updateTimers&&(this.timeContainer.updateTime(this.time/v.default.bs[this.key].speed),this.progressBar.updateProgress(this.time/this.baseTime)),0>this.time&&this.earnMoney(-this.time))}}]),e}();e.default=x},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=function(t){return t&&t.__esModule?t:{default:t}}(i(38)),l=function(t){function e(t){var i;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),i=r(this,o(e).call(this,t.scene,t.x,t.y));var n=60,s=60,a=t.scene.add.sprite(n,s,"iconBg");i.add(a),i.icon=t.scene.add.sprite(n,s-6,t.icon),i.icon.setInteractive({useHandCursor:!0}),i.icon.on("pointerdown",(function(){i.emit("produce"),i.checkArrow()})),i.add(i.icon);var h=t.scene.add.sprite(0,s+36,"iconBar");return h.setOrigin(0,.5),i.add(h),i.investmentsLoad=t.scene.add.image(0,s+36,"iconBarLoad"),i.investmentsLoad.setOrigin(0,.5),i.add(i.investmentsLoad),i.shape=t.scene.make.graphics(),i.add(i.shape),i.investmentsLabel=t.scene.add.text(n,s+36,"",{fontFamily:"CalvertMT-Bold",fontSize:"20px",align:"center",color:"#fff"}),i.investmentsLabel.setOrigin(.5).setStroke("#000",4),i.add(i.investmentsLabel),i.arrow=t.scene.add.sprite(60,140,"arrow"),i.arrow.setVisible(!1),i.scene=t.scene,i.add(i.arrow),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,Phaser.GameObjects.Container),function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(e,[{key:"updateInvestmentLabel",value:function(t,e,i){this.shape.clear(),this.shape.fillStyle(2238254),this.shape.fillRect(112,82,-104*(1-(t-i)/(e-i)),27);var n="".concat(t,"/").concat(e);e||(n=this.investmentsLabel.text="".concat(t)),this.investmentsLabel.text=n}},{key:"displayArrow",value:function(){this.arrow.setVisible(!0),this.arrowTween=this.scene.tweens.add({targets:this.arrow,y:120,ease:"Sine.easeInOut",duration:600,yoyo:!0,loop:-1})}},{key:"checkArrow",value:function(){this.arrow.visible&&(this.arrow.setVisible(!1),this.arrowTween.stop(),h.default.set("tutorial.open",!1))}}]),e}();e.default=l},function(t,e){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(t){function e(t){var i;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),i=s(this,r(e).call(this,t.scene,t.x,t.y));var n=t.scene.add.sprite(0,0,"progressLoadBar");return n.setOrigin(0),i.add(n),i.progressFillBar=t.scene.add.sprite(0,0,"progressFillBar"),i.progressFillBar.setOrigin(0),i.add(i.progressFillBar),i.progressSpriteBar=t.scene.add.sprite(0,0,"progressSpriteBar"),i.progressSpriteBar.setOrigin(0).setVisible(!1),i.add(i.progressSpriteBar),t.scene.anims.create({key:"loading",frames:t.scene.anims.generateFrameNumbers("progressSpriteBar",{frames:[0,1,2,3,4,5,6]}),frameRate:30,repeat:-1}),i.progressSpriteBar.play("loading"),i.shape=t.scene.make.graphics(),i.add(i.shape),i.revenueLabel=t.scene.add.text(172,2,"",{fontFamily:"CalvertMT-Bold",fontSize:"20px",align:"center",color:"#fff"}),i.revenueLabel.setOrigin(.5,0).setStroke("#000000",6),i.add(i.revenueLabel),t.auto&&i.setAuto(),i.auto||i.updateProgress(1),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,Phaser.GameObjects.Container),function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(e,[{key:"updateRevenueText",value:function(t){this.revenueLabel.text="".concat(t.value," ").concat(t.units),this.auto&&(this.revenueLabel.text+=" / sec")}},{key:"updateProgress",value:function(t){0>t&&(t=1),this.shape.clear(),this.shape.fillStyle(2238254,1),this.shape.fillRect(344,2,-344*t,30)}},{key:"setAuto",value:function(){this.auto=!0,this.shape.clear(),this.progressSpriteBar.setVisible(!0),this.progressFillBar.setVisible(!1)}}]),e}();e.default=a},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=function(t){return t&&t.__esModule?t:{default:t}}(i(38)),l=function(t){function e(t){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=0,s=0;return(i=r(this,o(e).call(this,t.scene,t.x,t.y))).enabled=!0,i.investButton=t.scene.add.image(n,s,"buyButton"),i.investButton.setOrigin(0).setInteractive({useHandCursor:!0}),i.add(i.investButton),i.investButtonHover=t.scene.add.image(n,s,"buyButtonHover"),i.investButtonHover.setOrigin(0).setVisible(!1),i.add(i.investButtonHover),i.investButtonPressed=t.scene.add.image(n,s,"buyButtonPressed"),i.investButtonPressed.setOrigin(0).setVisible(!1),i.add(i.investButtonPressed),i.investButtonDisabled=t.scene.add.image(n,s,"buyButtonDisabled"),i.investButtonDisabled.setOrigin(0).setVisible(!1),i.add(i.investButtonDisabled),i.investButton.on("pointerdown",(function(){i.investButtonPressed.visible=!0,i.emit("invest"),i.checkArrow()})),i.investButton.on("pointerup",(function(){i.investButtonPressed.visible=!1})),i.investButton.on("pointerover",(function(){i.investButtonHover.visible=!0})),i.investButton.on("pointerout",(function(){i.investButtonHover.visible=!1,i.investButtonPressed.visible=!1})),i.buyLabel=t.scene.add.text(n+20,s+36,"BUY X1",{fontFamily:"CalvertMT-Bold",fontSize:"20px",align:"left",color:"#fff"}),i.buyLabel.setOrigin(0,.5).setStroke("#000",6),i.add(i.buyLabel),i.costLabel=t.scene.add.text(n+205,s+28,"",{fontFamily:"CalvertMT-Bold",fontSize:"16px",align:"right",color:"#fff"}),i.costLabel.setOrigin(1,.5).setStroke("#000",6),i.add(i.costLabel),i.unitsLabel=t.scene.add.text(n+205,s+47,"",{fontFamily:"CalvertMT-Bold",fontSize:"15px",align:"right",color:"#fff"}),i.unitsLabel.setOrigin(1,.5).setStroke("#000",4),i.add(i.unitsLabel),i.arrow=t.scene.add.sprite(150,80,"arrow"),i.arrow.setVisible(!1),i.arrowTween=i.scene.tweens.add({targets:i.arrow,y:95,ease:"Sine.easeInOut",duration:400,yoyo:!0,loop:-1,paused:!0}),i.scene=t.scene,i.add(i.arrow),i.setEnabled(!!t.enabled),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,Phaser.GameObjects.Container),function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(e,[{key:"updateText",value:function(t){this.costLabel.text=t.value,this.unitsLabel.text=t.units}},{key:"setEnabled",value:function(t){return this.enabled!=t&&(this.enabled=t,this.investButton.visible=this.enabled,this.investButtonDisabled.visible=!this.enabled,this.costLabel.alpha=this.enabled?1:.5,this.unitsLabel.alpha=this.enabled?1:.5,this.buyLabel.alpha=this.enabled?1:.5,t)}},{key:"displayArrow",value:function(){this.arrow.setVisible(!0),this.arrowTween.play()}},{key:"checkArrow",value:function(){this.arrow.visible&&(this.arrow.setVisible(!1),this.arrowTween.stop(),h.default.set("tutorial.open",!1))}}]),e}();e.default=l},function(t,e){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=Math.floor;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=function(t){function e(t){var i;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),i=s(this,r(e).call(this,t.scene,t.x,t.y));var n=0,o=0,a=t.scene.add.sprite(n,o,"timeBox");return a.setOrigin(0),i.add(a),i.timeLabel=t.scene.add.text(n+a.width/2,o+a.height/2-4,"",{fontFamily:"CalvertMT-Bold",fontSize:"18px",align:"center",color:"#fff"}),i.timeLabel.setOrigin(.5).setStroke("#000",4),i.add(i.timeLabel),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,Phaser.GameObjects.Container),function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(e,[{key:"updateTime",value:function(t){0>t&&(t=0),this.timeLabel.text=function(t){var e=(t=Math.round(t/1e3))%60,i=a(t/60%60),n=a(t/3600%60);return n?"".concat(n,"h ").concat(i,"m ").concat(e,"s"):i?"".concat(i,"m ").concat(e,"s"):"".concat(e,"s")}(t)}}]),e}();e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function o(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=n(i(38)),u=n(i(122)),c=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=o(this,a(e).call(this,t.scene,t.x,t.y))).anchor={x:0,y:0},i.businessKey=t.businessKey,i.hasManager=!1,i.createButtons(t),i.createPortrait(t),i.setEnabled(!!t.enabled),i.setHasManager(l.default.bs[i.businessKey].manager),i.arrow=t.scene.add.sprite(40,100,"arrow"),i.arrow.setVisible(!1),i.arrowTween=i.scene.tweens.add({targets:i.arrow,y:115,ease:"Sine.easeInOut",duration:600,yoyo:!0,loop:-1,paused:!0}),i.scene=t.scene,i.add(i.arrow),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,Phaser.GameObjects.Container),function(t,e,i){e&&r(t.prototype,e),i&&r(t,i)}(e,[{key:"createButtons",value:function(t){var e=this;this.hireManagerButton=t.scene.add.image(this.anchor.x,this.anchor.y,"hireButton"),this.hireManagerButton.setOrigin(0).setInteractive({useHandCursor:!0}),this.add(this.hireManagerButton),this.hireManagerButtonHover=t.scene.add.image(this.anchor.x,this.anchor.y,"hireButtonHover"),this.hireManagerButtonHover.setOrigin(0).setVisible(!1),this.add(this.hireManagerButtonHover),this.hireManagerButtonPressed=t.scene.add.image(this.anchor.x,this.anchor.y,"hireButtonPressed"),this.hireManagerButtonPressed.setOrigin(0).setVisible(!1),this.add(this.hireManagerButtonPressed),this.hireManagerButtonDisabled=t.scene.add.image(this.anchor.x,this.anchor.y,"hireButtonDisabled"),this.hireManagerButtonDisabled.setOrigin(0).setVisible(!1),this.add(this.hireManagerButtonDisabled),this.hireManagerButton.on("pointerdown",(function(){e.hireManagerButtonPressed.visible=!0,e.emit("hire"),e.checkArrow()})),this.hireManagerButton.on("pointerup",(function(){e.hireManagerButtonPressed.visible=!1})),this.hireManagerButton.on("pointerover",(function(){e.hireManagerButtonHover.visible=!0})),this.hireManagerButton.on("pointerout",(function(){e.hireManagerButtonHover.visible=!1,e.hireManagerButtonPressed.visible=!1})),this.hireLabel=t.scene.add.text(this.anchor.x+20,this.anchor.y+45,"Hire!",{fontFamily:"CalvertMT-Bold",fontSize:"16px",align:"center",color:"#fff"}),this.hireLabel.setStroke("#000",4),this.add(this.hireLabel);var i=u.default.parseGold(.01*t.managerCost);this.hireCostLabel=t.scene.add.text(this.anchor.x+40,this.anchor.y+80,"".concat(i.value," ").concat(i.units),{fontFamily:"CalvertMT-Bold",fontSize:"14px",align:"center",color:"#fff"}),this.hireCostLabel.setStroke("#000",4).setOrigin(.5,0),this.add(this.hireCostLabel)}},{key:"createPortrait",value:function(t){this.managerBg=t.scene.add.image(this.anchor.x,this.anchor.y,"managerBG"),this.managerBg.setOrigin(0).setInteractive({useHandCursor:!0}).setVisible(this.hasManager),this.add(this.managerBg),this.managerSprite=t.scene.add.sprite(this.managerBg.width/2,this.managerBg.height/2-4,t.managerKey,t.managerIndex),this.managerSprite.setVisible(this.hasManager),this.add(this.managerSprite);var e=t.managerIndex+0;t.scene.anims.create({key:"idle-".concat(t.managerKey,"_emote-").concat(e),frames:t.scene.anims.generateFrameNumbers("".concat(t.managerKey,"_emote"),{frames:[e,e+1]}),frameRate:5,repeat:-1}),this.managerSprite.play("idle-".concat(t.managerKey,"_emote-").concat(e))}},{key:"setEnabled",value:function(t){return this.enabled!=t&&(this.enabled=t,this.hireManagerButton.visible=this.enabled,this.hireManagerButtonDisabled.visible=!this.enabled,this.hireLabel.visible=this.enabled,t)}},{key:"setHasManager",value:function(t){this.hasManager=t,this.managerBg.visible=this.hasManager,this.managerSprite.visible=this.hasManager,this.hireManagerButton.visible=!this.hasManager,t&&(this.hireManagerButton.visible=!1,this.hireManagerButtonHover.visible=!1,this.hireManagerButtonPressed.visible=!1,this.hireLabel.visible=!1,this.hireCostLabel.visible=!1)}},{key:"displayArrow",value:function(){this.arrow.setVisible(!0),this.arrowTween.play()}},{key:"checkArrow",value:function(){this.arrow.visible&&(this.arrow.setVisible(!1),this.arrowTween.stop(),l.default.set("tutorial.open",!1))}}]),e}();e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function o(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=n(i(72)),c=n(i(165)),d=n(i(38)),f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,h(e).call(this,{key:"pauseScene"}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),function(t,e,i){e&&r(t.prototype,e),i&&r(t,i)}(e,[{key:"create",value:function(t){var i=this;a(h(e.prototype),"create",this).call(this,t);var n=this.add.graphics();n.fillStyle(3346722,.8),n.fillRect(0,0,800,600),this.back=this.createButton({x:100,y:200,keyText:"back",onClick:function(){return i.close()}}),this.save=this.createButton({x:100,y:100,keyText:"save_data",onClick:function(){(0,c.default)().save({data:d.default.stats.mainScene,useHash:!0})}}),this.exit=this.createButton({x:100,y:150,keyText:"exit",onClick:function(){return i.changeToScene("mainMenu")}}),this.titleText.y+=40,this.titleText.x+=40,this.events.on("shutdown",(function(){return i.shutdown()}),this),this.sceneManager.pauseGame()}},{key:"shutdown",value:function(){this.sceneManager.resumeGame(),this.events.off("shutdown")}}]),e}(u.default);e.default=f}]);